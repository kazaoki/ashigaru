var __SITE__,__MANAGE__,__UPLOADS__,__PAGE_SLUG__;window.addEventListener("DOMContentLoaded",(function(e){__SITE__=document.querySelector('meta[name="ashigaru:site"]').getAttribute("content");__MANAGE__=document.querySelector('meta[name="ashigaru:manage"]').getAttribute("content");__UPLOADS__=document.querySelector('meta[name="ashigaru:uploads"]').getAttribute("content");__PAGE_SLUG__=document.querySelector('meta[name="ashigaru:page_slug"]').getAttribute("content");window.addEventListener("resize",sidemenu_changer);sidemenu_changer();if("news"===__PAGE_SLUG__){var t=document.getElementById("filter-cat");t&&(t.onchange=function(e){var t=e.target.value;location.href=t?__MANAGE__+"/news/cat/"+t+"/":__MANAGE__+"/news/"});var n=document.querySelectorAll("input.upload-pdf");n&&n.forEach((function(e){e.onchange=function(e){var t=e.target.files,n=document.getElementById("pdf-filename"),a=document.getElementById("pdf-filename-label"),o=document.querySelector("[name=pdf_base64]"),r=document.getElementById("pdf-cancel"),i=new FileReader;i.onload=function(e){if(e.target){o.value=e.target.result;n.value=a.innerText=t[0].name;r.style.visibility="visible"}};t&&t[0]&&i.readAsDataURL(t[0])}}));var a=document.querySelectorAll("button.cancel-button");a&&a.forEach((function(e){e.onclick=function(t){var n=e.getAttribute("data-for");document.getElementById(n+"-cancel").style.visibility="hidden";var a=document.getElementById(n+"-filename"),o=document.getElementById(n+"-filename-label");document.querySelector("[name="+n+"]").value="";var r=document.querySelector("[name="+n+"_base64]"),i=document.querySelector("[name="+n+"_upped]");if(i.value){a.value=o.innerText=i.value;r.value=""}else{a.value=o.innerText="";r.value=""}}}));var o=document.getElementById("pdf-preview-form-submit");o&&(o.onclick=function(e){var t=document.getElementById("pdf-base64");document.getElementById("pdf-base64-for-preview").value=t.value;var n=document.getElementById("pdf-filename");document.getElementById("pdf-filename-for-preview").value=n.value;document.getElementById("pdf-preview-form").submit()})}var r=document.getElementById("set-current-time");r&&(r.onclick=function(e){var t=new Date,n=t.getFullYear(),a=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,o=t.getDate()<10?"0"+t.getDate():t.getDate(),r=t.getHours()<10?"0"+t.getHours():t.getHours(),i=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),u=document.querySelector("[name=published_date]");u&&(u.value=n+"-"+a+"-"+o);var l=document.querySelector("[name=published_time]");l&&(l.value=r+":"+i)});document.querySelectorAll("[data-get-action]").forEach((function(e){e.onclick=function(t){var n=e.getAttribute("data-get-action"),a=e.getAttribute("data-confirm"),o=e.getAttribute("data-bind-ids"),r=e.getAttribute("data-on-send");if(r){if(!1===Function(r)())return!1}if(n){if(a&&!window.confirm(a))return;if(o)for(var i=0,u=o.split(/,\s+/);i<u.length;i++){var l=u[i],d="",c=document.querySelector("[id="+l+"]");if(c){if("radio"===c.type||"checkbox"===c.type){for(var m=document.querySelectorAll("[id="+l+"]:checked"),s=[],f=0,_=Array.from(m);f<_.length;f++){var g=_[f];s.push(g.value)}d=s.join(",")}else d=c.value;n=n.replace(/%s/,d)}}location.href=n}}}));document.querySelectorAll("[data-post-action]").forEach((function(e){e.onclick=function(t){var n=e.getAttribute("data-post-action"),a=e.getAttribute("data-confirm"),o=e.getAttribute("data-params"),r=document.getElementById("post-action-form");if(!r){var i=e.getAttribute("data-target-form");if(i){var u=document.getElementById(i);u&&(r=u)}}if(o)for(var l=JSON.parse(o),d=0,c=Object.keys(l);d<c.length;d++){var m=c[d],s=document.createElement("input");s.type="hidden";s.name=m;s.value=l[m];r.appendChild(s)}if(n){if(a&&!window.confirm(a))return;r.action=n;r.submit()}}}))}));function sidemenu_changer(){var e=document.querySelector("#side-menu");if(e){var t=document.querySelector("#side-menu>div.oc-wrap");if(960<document.body.clientWidth){if(!e.getAttribute("uk-offcanvas"))return;e.removeAttribute("uk-offcanvas");e.classList.remove("uk-offcanvas");null==t||t.classList.remove("uk-offcanvas-bar")}else{if(e.getAttribute("uk-offcanvas"))return;e.setAttribute("uk-offcanvas","mode:push; flip:true; overlay:true");null==t||t.classList.add("uk-offcanvas-bar")}}}window.addEventListener("DOMContentLoaded",(function(e){document.querySelectorAll("[data-ckeditor]").forEach((function(e){return ckeditor_load(e)}))}));var allowedContentCommon=!0;function ckeditor_load(e){if("content"===e.getAttribute("data-ckeditor")){__SITE__=document.querySelector('meta[name="ashigaru:site"]').getAttribute("content");__MANAGE__=document.querySelector('meta[name="ashigaru:manage"]').getAttribute("content");__UPLOADS__=document.querySelector('meta[name="ashigaru:uploads"]').getAttribute("content");var t=CKEDITOR.replace(e,{allowedContent:allowedContentCommon,enterMode:CKEDITOR.ENTER_BR,shiftEnterMode:CKEDITOR.ENTER_P,height:350,bodyId:document.querySelector("body.news")?"newsCo":"voiceCo",stylesSet:[{name:"h3 見出し",element:"h3"},{name:"h4 中見出し",element:"h4"},{name:"h5 小見出し",element:"h5"},{name:"p 段落",element:"p"}],font_names:"ＭＳ Ｐゴシック;ＭＳ Ｐ明朝;ＭＳ ゴシック;ＭＳ 明朝;游ゴシック;游明朝;",toolbar:document.querySelector("body.news")?[["Bold","Underline","Strike","RemoveFormat"],["JustifyLeft","JustifyCenter","JustifyRight"],["TextColor","BGColor"],["BulletedList","NumberedList"],["Link","Unlink"],["Image","Table"],["Source"]]:[["Styles"],["Bold","Underline","Strike","RemoveFormat"],["JustifyLeft","JustifyCenter","JustifyRight"],["TextColor","BGColor"],["BulletedList","NumberedList"],["Link","Unlink"],["Image","Table"],["Source"]],removeButtons:"Templates,Save,NewPage,Preview,Print,Cut,Undo,Redo,Copy,Paste,PasteText,PasteFromWord,Find,SelectAll,Scayt,Replace,Form,Checkbox,Radio,TextField,Textarea,Select,Button,ImageButton,HiddenField,Subscript,Superscript,CopyFormatting,Outdent,Indent,Blockquote,CreateDiv,BidiLtr,BidiRtl,Language,Anchor,Flash,HorizontalRule,Smiley,SpecialChar,PageBreak,Iframe,Format,ShowBlocks,Maximize,About",filebrowserBrowseUrl:__MANAGE__+"/assets/kcfinder/browse.php?type=files",filebrowserImageBrowseUrl:__MANAGE__+"/assets/kcfinder/browse.php?type=images",filebrowserFlashBrowseUrl:__MANAGE__+"/assets/kcfinder/browse.php?type=flash",filebrowserUploadUrl:__MANAGE__+"/assets/kcfinder/upload.php?type=files",filebrowserImageUploadUrl:__MANAGE__+"/assets/kcfinder/upload.php?type=images",filebrowserFlashUploadUrl:__MANAGE__+"/assets/kcfinder/upload.php?type=flash",filebrowserUploadMethod:"form",extraPlugins:"autogrow,widget,lineutils,image2,justify,colorbutton,font",removePlugins:"image",autoGrow_minHeight:500,autoGrow_maxHeight:500,autoGrow_bottomSpace:50,templates:"default"});t.on("blur",(function(e){window.validon.send(e.editor.name)}));e.ckeSync=function(){return this.value=t.getData()}}}
//# sourceMappingURL=index.js.map
